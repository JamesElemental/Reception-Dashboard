- name: Screenshot (simple)
        shell: bash
        run: |
          TS=$(date -u +"%Y%m%d-%H%M")
          export TS

          node - <<'END'
          const { chromium } = require('playwright');

          (async () => {
            const t = process.env.TS;

            const browser = await chromium.launch({
              headless: true,
              args: ['--no-sandbox']
            });

            // PERFECT Power BI viewport (fixes clipping)
            const page = await browser.newPage({
              viewport: { width: 1920, height: 1080 }
            });

            await page.goto(
              'https://app.powerbi.com/view?r=eyJrIjoiY2E0NzNjOTktYzkxZC00N2NhLWJlY2YtMDgwNTFmZjUyOGNjIiwidCI6ImYxZDhiY2I0LTdlYTgtNDcxNC1iYmYzLTlhMzg5NzY0ZjM1MCJ9',
              { waitUntil: 'networkidle' }
            );

            // allow visuals to fully settle
            await page.waitForTimeout(15000);

            const output = `dashboard-${t}.png`;

            await page.screenshot({
              path: output,
              fullPage: true
            });

            console.log("Saved:", output);

            await browser.close();
          })();
          END

          mkdir -p screenshots
          mv "dashboard-$TS.png" "screenshots/dashboard-$TS.png"
          cp "screenshots/dashboard-$TS.png" "screenshots/dashboard-latest.png"
          echo "dashboard-$TS.png" > screenshots/latest.txt
